{% extends 'layout/master.njk' %}

{% block content %}
<div class="container admin-dashboard-margin-y-8">
  <div class="admin-article-form-container dp-pt-0">
    <div class="row align-items-center admin-dashboard-fix-row">
      <div class="col-sm-12 col-md-12">
        <div class="card admin-dashboard-card dp-pt-0" itemscope itemtype="https://schema.org/Table">
            {# Inset text #}
            <div class="dp-inset-text dp-inset-text--yellow">
                <p>
                    Youâ€™re working on a
                    <strong class="key-term__2">revision draft</strong>.
                    Changes here will not affect the
                    <strong class="key-term__2">live post</strong>
                    until you
                    <strong class="key-term__2">publish the revision</strong>.
                </p>
            </div>

            {# Information Message #}
            {% if info_flash_messages.length > 0 %}
                {% set msg = info_flash_messages [0] %}
                {{ flashPanel('information', msg.title, msg.message) | safe }}
            {% endif %}

            {# Success Message #}
            {% if success_flash_messages.length > 0 %}
                {% set msg = success_flash_messages[0] %}
                {{ flashPanel('completion', msg.title, msg.message) | safe }}
            {% endif %}

            {# Error messages #}
            {% if error_flash_messages.length > 0 %}
                {{ flashBanner('error', error_flash_messages) | safe }}
            {% endif %}

            {{ form().openTag(f) }}

                {{ formHidden(f.get('id')) | safe }}
                {{ formHidden(f.get('author_id')) | safe }}

                <div class="form-group{% if errorDecorator(f.get('title')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('title')) | safe }}
                    {{ formError(f.get('title')) | safe }}
                    {{ formText(f.get('title')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('slug')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('slug')) | safe }}
                    {{ formError(f.get('slug')) | safe }}
                    {{ formText(f.get('slug')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('excerpt_markdown')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('excerpt_markdown')) | safe }}
                    {{ formError(f.get('excerpt_markdown')) | safe }}
                    {{ formTextarea(f.get('excerpt_markdown')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('content_markdown')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('content_markdown')) | safe }}
                    {{ formError(f.get('content_markdown')) | safe }}
                    {{ formTextarea(f.get('content_markdown')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('author_name')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('author_name')) | safe }}
                    {{ formError(f.get('author_name')) | safe }}
                    {{ formText(f.get('author_name')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('category_id')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('category_id')) | safe }}
                    {{ formError(f.get('category_id')) | safe }}
                    {{ formSelect(f.get('category_id')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('meta_description')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('meta_description')) | safe }}
                    {{ formError(f.get('meta_description')) | safe }}
                    {{ formTextarea(f.get('meta_description')) | safe }}
                </div>

                <div class="form-group{% if errorDecorator(f.get('comments_enabled')) %} dp-form-group--error{% endif %}">
                    {{ formCheckbox(f.get('comments_enabled')) | safe }}
                    {{ formLabel(f.get('comments_enabled')) | safe }}
                    {{ formError(f.get('comments_enabled')) | safe }}
                </div>

                 <div class="form-group{% if errorDecorator(f.get('change_reason')) %} dp-form-group--error{% endif %}">
                    {{ formLabel(f.get('change_reason')) | safe }}
                    {{ formError(f.get('change_reason')) | safe }}
                    {{ formTextarea(f.get('change_reason')) | safe }}
                </div>

               <div class="form-group">
                    <div class="dp-button-group">
                        <div class="dp-button-group__left">
                            <div class="dp-button-group__primary-actions">
                                {{ formSubmit(f.get('save_revision_draft')) | safe }}
                                {{ formSubmit(f.get('publish_revision')) | safe }}
                            </div>
                            <div class="dp-button-group__destructive-actions">
                                {{ formSubmit(f.get('delete_draft')) | safe }}
                            </div>
                            <div class="dp-button-group__secondary-actions">
                                {{ formSubmit(f.get('exit_this_page')) | safe }}
                            </div>
                        </div>
                    </div>
                </div>
            {{ form().closeTag() }}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}